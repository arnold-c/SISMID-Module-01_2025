[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "SISMID Module 2 Materials (2023)",
    "section": "",
    "text": "Preface"
  },
  {
    "objectID": "r-session-01.html",
    "href": "r-session-01.html",
    "title": "R Session 01",
    "section": "",
    "text": "viewof beta = Inputs.range(\n  [0.0, 2.0],\n  {value: 0.25, step: 0.01, label: \"Infectivity rate\"}\n)\nviewof dur_inf = Inputs.range(\n  [0.0, 20],\n  {value: 8.0, step: 0.5, label: \"Duration of Infection\"}\n)\n\nviewof I0 = Inputs.range(\n  [0.0, 1.0],\n  {value: 0.01, dt: 0.01, label: \"Initial fraction infected\"}\n)\n\nviewof area = Inputs.toggle(\n  {label: \"Cumulative Area plot\", value: false}\n)\n\nR0 = beta * dur_inf\n\nmd`${tex`R_0 = ${R0.toLocaleString(undefined, {minimumFractionDigits: 2})}`}`\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction sir(dydt, y, t) {\n  var gamma = 1 / dur_inf\n\n  dydt[0] = -beta * y[0] * y[1]\n  dydt[1] = beta * y[0] * y[1] - gamma * y[1]\n  dydt[2] = gamma * y[1]\n}\n\n\n\n\n\n\n\nimport {odeRK4} from '@rreusser/integration@3064'\nimport { aq, op } from '@uwdata/arquero'\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction simulate(f, t0, y0, dt, tmax) {\n  var t = t0\n  var y = y0\n  var i = 0\n\n  var tsim = [t0]\n  var ysim = [y0]\n\n  for (t = t0 + dt; t <= tmax; t += dt) {\n    ysim.push(odeRK4([], ysim[i], f, dt))\n    tsim.push(t)\n    i += 1\n  }\n  \n  return aq.table({\n    t: tsim,\n    S: ysim.map(d => d[0]),\n    I: ysim.map(d => d[1]),\n    R: ysim.map(d => d[2])\n    })\n}\n\n\n\n\n\n\n\nsir_sol = simulate(sir, 0, [1.0-I0, I0, 0.0], 0.01, 200)\nsir_sol_long = sir_sol.fold(aq.not('t'), {as: ['State', 'Fraction']})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlotData\n\n\n\nPlot.plot({\n  color: {legend: true, domain: [\"S\", \"I\", \"R\"]},\n  marks: [\n    area ?\n      Plot.areaY(sir_sol_long, {x: \"t\", y: \"Fraction\", fill: \"State\"}) :\n      Plot.lineY(sir_sol_long, {x: \"t\", y: \"Fraction\", stroke: \"State\", strokeWidth: 3})\n  ]\n})\n\n\n\n\n\n\n\n\n\nsir_sol.view()"
  }
]